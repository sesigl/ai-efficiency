flowchart LR
  subgraph Contracts["Published Language (Contracts)"]
    AvailabilitySignal[AvailabilitySignal]
  end

  subgraph Pricing["Pricing Bounded Context"]
    PApp["Application"]
    PDom["Domain (PriceEntry AR, rules, VOs)"]
    PInfra["Infrastructure"]
    PInfra --> PApp --> PDom
  end

  subgraph Warehouse["Warehouse Bounded Context"]
    WApp["Application"]
    WDom["Domain (InventoryItem AR)"]
    WInfra["Infrastructure"]
    WInfra --> WApp --> WDom
  end

  subgraph Catalog["Product Catalog Bounded Context"]
    CApp["Application"]
    CDom["Domain (Product AR, VOs)"]
    CInfra["Infrastructure"]
    CInfra --> CApp --> CDom
  end

  PDom -. "consumes" .-> AvailabilitySignal
  WDom -. "publishes" .-> AvailabilitySignal
  PInfra -->|"getAvailability(sku)"| WApp

  %% Relationship Notes:
  %% - Customer-Supplier: Pricing (Customer) depends on Warehouse (Supplier)
  %% - Published Language: AvailabilitySignal is the contract
  %% - Warehouse does NOT know about Pricing
  %% - Pricing cannot access Warehouse internals
  %% - Catalog is fully independent: no dependencies on Warehouse or Pricing
